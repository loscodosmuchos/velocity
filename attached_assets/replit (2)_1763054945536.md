# VELOCITY Intelligence Network (VIN) - Strategic Workforce Console

---

## **üéØ FOUNDATIONAL PHILOSOPHY** *(Why We Work This Way)*

**START HERE**: `docs/THE_PHILOSOPHY.md` - The core principles of frictionless work, flywheel momentum, and compound learning that inform everything we do.

**THEN READ**: `docs/THE_CONTEXT_PHILOSOPHY.md` - üî• **ESSENTIAL**: Why we capture everything hot, preserve chain of custody, and build for friction reduction. Draws from decades of tape recovery experience to explain the Touch Once Principle, L1 cache vs swap space, and why context preservation is the difference between capability and impossibility.

**Begin with the Parable**: Part 0 of THE_PHILOSOPHY.md contains "The Architect and the Lens"‚Äîa story that embeds the patterns of collaborative emergence. This parable is not merely descriptive but transformative. By engaging with it, you experience the patterns rather than just reading about them. Our entire collaboration on VIN enacted this parable.

**Then review these practical frameworks before ANY work session**:
1. **ORDER_OF_OPERATIONS.md** - The universal best practice: Schema ‚Üí Storage ‚Üí API ‚Üí UI
2. **MULTI_EXPERT_DISCOVERY_FRAMEWORK.md** - ‚≠ê CRITICAL: Multi-expert lens-switching + 6 Core Criteria per page (MVP, Nice-to-Have, Click Behavior, Metadata, User Anticipation, Wow Factor) + Discovery questions for 10 expert personas + Hyundai/Wes specific requirements
3. **CONTEXT_INTELLIGENCE_FRAMEWORK.md** - üÜï 15 Mandatory Questions every feature must answer (Audience, Access Context, Value Proposition, Urgency Profile, Complexity Assessment) + VIN page specification template
4. **HYUNDAI_EXPERT_PERSONAS.md** - üÜï 10 expert personas mapped to Hyundai roles (Wes=CPO, Mark=Field Ops) with cognitive frameworks, pain points, and VIN use cases
5. **VALUE_QUANTIFICATION_TEMPLATE.md** - üÜï ROI calculation framework with TIER 1 feature valuations ($1.4M annual value, 9-day payback)
6. **DAILY_STANDUP.md** - 2-minute health check to start right
7. **CRITICAL_WORKFLOWS.md** - Pre-flight checklist before major changes
8. **FUNCTIONAL_AUDIT_FRAMEWORK.md** - Validation criteria for all features
9. **DEVIATION_DETECTION.md** - Warning signs when you're off the path
10. **LESSONS_LEARNED/** - Repository of hard-won solutions
    - **CROSS_LINKING_IMPLEMENTATION.md** - üî• FRESH: Complete guide to entity navigation (Display IDs vs Database IDs, FK hygiene, EntityLink patterns, iterative architect validation, "If They Click It" compliance)

**Why these exist**: To prevent repeating solved problems. To honor time invested in learning lessons. To build momentum through reduced friction.

**The Philosophy in Practice**:
- üéØ **The Flywheel Effect** - Each lesson learned adds momentum for the next
- üìö **The Disk Stacking Protocol** - Preserve wisdom, don't drop disks
- ‚ö° **The Frictionless System** - Early detection prevents major intervention
- üî• **The Hot System Principle** - Document while associations are firing, not after buffers flush (capture insights when "the system is hot" for maximum knowledge transfer and compound learning)

**Location**: `docs/` folder - Always accessible, always referenced.

**Golden Rules**:
- ‚úÖ **Rule #0: Data Contracts First** - "Confirm core data contracts and system invariants before coding" (Schema ‚Üí Storage ‚Üí API ‚Üí UI)
- ‚úÖ **User Anticipation First** - "What would the user EXPECT and TRY?" not just "what can we build?" (See MULTI_EXPERT_DISCOVERY_FRAMEWORK.md)
- ‚úÖ **6 Core Criteria Per Page** - MVP Fields, Nice-to-Have, Click Behavior, Metadata, User Anticipation, Wow Factor
- ‚úÖ **"If They Click It, Something Should Happen"** - No orphaned UI elements; every clickable element must have meaningful behavior (See CROSS_LINKING_IMPLEMENTATION.md)
- ‚úÖ **Function Before Form** - Complete workflows first, then style
- ‚úÖ **Validate Everything** - Use WHAT/WHY/WHO/HOW/VALIDATION criteria
- ‚úÖ **Database First** - Design schema before UI
- ‚úÖ **Test End-to-End** - Manual verification before calling complete
- ‚úÖ **Document Lessons NOW** - Every solution goes in LESSONS_LEARNED while "the system is hot" (maximum association, minimum friction)
- ‚úÖ **Monitor Early** - Catch deviations before they compound

**Integration Points**: These frameworks are referenced in code comments, task workflows, and architect reviews to ensure they're never forgotten.

---

## **üìã CRITICAL SCHEMA STANDARDS** *(November 2024 - TIER 1 Remediation)*

**MONETARY DATA TYPES** (Architect-Mandated):
- ‚úÖ **ALWAYS use `integer` for monetary values** - Store cents, not dollars (e.g., 25000000 cents = $250,000)
- ‚ùå **NEVER use `real`, `numeric`, or floating-point types** - Causes precision loss and rounding errors
- üìä **Conversion pattern**: 
  - Schema: `amount: integer("amount").notNull()` 
  - Display: `(cents / 100).toLocaleString('en-US', { style: 'currency', currency: 'USD' })`
  - Input: `Math.round(dollars * 100)`

**DERIVED FIELDS** (Architect-Mandated):
- ‚úÖ **Calculate on-the-fly** - Compute in API/UI layer (e.g., `budgetRemaining = budgetAllocated - budgetSpent`)
- ‚ùå **NEVER store in database** - Creates sync issues and data staleness
- üìù **Examples removed**: `newHireBudgetRemaining`, `burnPercent`, `daysUntilExpiry`

**STORAGE ORGANIZATION** (Architect-Mandated):
- ‚úÖ **Segment TIER 1 vs NON-TIER 1** - Clear section markers in IStorage interface
- üìå **TIER 1 entities**: Timecards, SOWs, Change Orders, Contractor Compliance, Projects, Resources, POs, Vendors
- üìå **NON-TIER 1 systems**: Knowledge Management, Feature Staging, App Configuration, Dashboard Customization

**Validation Checklist** (Before Schema Changes):
1. Are monetary fields `integer` (cents)?
2. Are derived fields removed from schema?
3. Is IStorage organized by tier/priority?
4. Have you run `npm run db:push --force` after schema changes?
5. Have you updated seed data to match new types?

**Reference**: See Tasks 18-24 for complete remediation history.

---

## Overview
The VELOCITY Intelligence Network (VIN) is a full-stack web application for strategic workforce management. It provides a dashboard interface with real-time KPIs, spending trends, geographic distribution analytics, and quick actions to enhance workforce oversight and decision-making. The project aims to be a comprehensive solution for modern workforce intelligence, offering deep insights and streamlined management capabilities. It supports role-based views, critical alerts, and advanced features like an animated dashboard, candidate profiles, and AI integration for a robust workforce intelligence platform.

## User Preferences
Preferred communication style: Simple, everyday language.
AI Voice Assistant: Consultative sales approach, pain-to-pleasure transformation, mirror client communication style, engage with discovery questions, seek feedback continuously, be ready to go deep on technical details when requested.
Interaction Numbering: All assistant responses and user interactions must be numbered sequentially for easy reference and tracking (e.g., Response #181, Response #182, etc.). CRITICAL: This must be included in EVERY response.
Task Management: Use lightweight task tracking for focused work and change association.
Code Quality: Replace magic numbers/strings with named constants for maintainability.

## System Architecture

### Frontend
- **Framework**: React 18 with TypeScript
- **Styling**: Tailwind CSS with shadcn/ui and Radix UI
- **Routing**: Wouter
- **State Management**: TanStack Query (React Query)
- **Build Tool**: Vite

### Backend
- **Runtime**: Node.js with Express.js
- **Language**: TypeScript with ES modules
- **API Style**: REST API with JSON responses

### Data Storage
- **ORM**: Drizzle ORM
- **Database**: PostgreSQL with Neon serverless driver
- **Migrations**: Drizzle Kit

### Core Features
- **Dashboard**: Main dashboard with KPI cards, spending trends (Recharts), geographic distribution, and quick actions.
- **Role-Based Views**: Support for 6 professional position views.
- **Critical Alerts**: Comprehensive page with detailed impact analysis and resolution plans.
- **Navigation**: Screen navigator with demo navigation dropdown.
- **Export Functionality**: Sample report export (PDF generation using jsPDF).
- **Interactivity**: Clickable charts and employee detail pages.
- **Data Views**: Dense spreadsheet-style view of workforce data.
- **Animated Dashboard**: Automotive-themed command center with real-time animations and network topology.
- **Candidate Profiles**: Complete candidate management.
- **AI Integration**: ElevenLabs AI voice assistant with side-by-side popup windows.
- **AI Assistants Page**: Comprehensive catalog of 19+ specialized AI helper bots covering platform navigation, data intelligence, compliance, talent management, sourcing, workforce management, contract analysis, vendor rating, asset lifecycle, automotive portfolio knowledge, and next-gen automation (agentic AI, hyperautomation, conversation intelligence).
- **Security**: Server-side authentication with environment variables.
- **Enterprise RFQ Form**: Integrated Request for Quote form.
- **VMS Platform Concepts**: Strategic consultation page.
- **Corporate Design System**: Professional redesigns with glassmorphism, gradients, and geometric patterns across 4 themes (Executive Suite, Minimal Corporate, Innovation Lab, Enterprise Command).
- **Dynamic Korean Language System**: Comprehensive Korean interface with real-time language switching and layout preservation.
- **PC4 Workforce Center**: Advanced workforce management interface with QuickFeedback and Korean language support.
- **Asset Management Strategy**: Comprehensive ITAD-compliant asset lifecycle system with multi-modal data capture (web, mobile, voice, chatbot, automated scripts, barcode scanning), flexible custom fields, and workforce integration for disposition decisions.
- **PC2 Customizable Dashboard**: Drag-and-drop, resizable procurement module cards with Compact/Comfortable view toggle. Features comprehensive layout management: save multiple named layouts, export/import as JSON files, set default layouts, auto-saving using react-grid-layout.
- **PC2 T&M Spend Tracking (Redesigned)**: Institutional-grade design with compact KPI cards, enterprise table layout, functional Export Report (PDF), and Generate Budget Forecast features. Follows professional design principles with neutral palette, proper spacing (max-w-7xl, gap-6, p-6), and clear visual hierarchy.

### Design Principles
- **UI/UX**: Professional, compact layouts, consistent styling, improved color contrast, meaningful animations.
- **Design System**: Use Tremor (@tremor/react) for all UI components. Centralized standards in `client/src/lib/standards.ts`. One change = entire site updates.
- **Standard Layout**: All pages use `StandardPageLayout` wrapper OR manually apply `PAGE.wrapper` + `PAGE.container` + `PAGE.spacing` from standards.ts
- **Standard Grids**: Use `GRID.cols3` (most common), `GRID.cols2`, or `GRID.cols4` from standards.ts
- **Colors**: Automotive theme (blue, purple, cyan) defined in `COLORS` constant in standards.ts
- **Premium Backgrounds**: 10 luxury theme options (Clean Slate, Brushed Titanium, Executive Navy, Carbon Weave, Platinum Shimmer, Midnight Professional, Industrial Graphite, Pearl Essence, Gunmetal Gray, Royal Executive) - configurable via `/admin-theme-settings`
- **Design Audit System**: PageAuditBadge component shows compliance percentage and detailed checklist for each page. Tracks Tremor usage, spacing, typography, colors, responsiveness, and accessibility.
- **Institutional Design Standard**: Understated elegance with deep blues, earthy greens, clean lines. KPI cards use compact p-6 padding, uppercase metadata, text-4xl metrics, border-l-4 accents. Enterprise tables with header rows, py-4 padding, dividers, hover states. Neutral bg-slate-50 background, max-w-7xl containers, gap-6 spacing system.
- **Accessibility**: Use of Radix UI primitives and Tremor components.
- **Modularity**: Monorepo structure with shared types and schemas.
- **Readify Process**: Intelligent UI enhancement for stakeholder-relevant visual hierarchies.
- **PROCUREMENT-FIRST UI HIGHLIGHTING (CRITICAL SITE-WIDE PRINCIPLE)**: Prioritization and visual emphasis of 5 core procurement data points: WHO (Contractor Names), HOW MUCH (Rates/Costs), WHICH budget (PO Numbers/Contract IDs), WHAT (Projects/Scope), and HOW MUCH is left (Budget Remaining/Spend). This principle guides all UI decisions.

## External Dependencies

### Core
- `@neondatabase/serverless`: Neon PostgreSQL serverless driver
- `drizzle-orm`: Type-safe ORM
- `@tanstack/react-query`: Server state management
- `recharts`: Chart visualization library
- `wouter`: Lightweight routing library
- `jsPDF`: PDF generation library
- `ElevenLabs API`: AI voice assistant integration

### UI/Styling
- `@radix-ui/*`: Headless UI primitives
- `tailwindcss`: Utility-first CSS framework
- `lucide-react`: Icon library
- `class-variance-authority`: Type-safe CSS class variants
- `shadcn/ui`: Component library

### Development Tools
- `vite`: Build tool and development server
- `typescript`: Type checking and compilation
- `esbuild`: Server bundling for production

### Available Integration Ecosystem
- **MCP Servers & AI Platforms**: agenticflow, jetbrains, klavis.ai, jenova, hyperbrowser, block/goose, modcontextprotocolservers, kygomez/swarms, roo code, openweb gui, playwright.
- **External Services & APIs**: perplexity, slack, twilio, supabase, storj, dropbox, comet.com/opik.
- **White-Label iPaaS Capabilities**: LlamaIndex, n8n, Vellum/Gumloop, Prismatic, MCP Integration.