# ScriptMaster - AI-Powered Script & Contract Generation Platform

## Overview

ScriptMaster is a professional productivity application with two core capabilities:

1. **ElevenLabs Conversational AI Scripts**: Generate production-ready voice scripts with proper audio markup, character development, and conversation flow. Scripts include ElevenLabs XML/SSML tags and are designed for immediate deployment as conversational AI agents.

2. **Contract Testing Lab** (In Development): Generate sample MSP/tech contracts with intentional deficiencies for AI analysis testing. Enables bulk generation, multi-lens analysis (Legal, Financial, Technical, Risk), and professional reporting with corporate styling.

The platform follows a core philosophy: **"Get it in cleanly → Process reliably → Output beautifully"** - making input effortless, processing transparent, and outputs presentation-ready.

## User Preferences

Preferred communication style: Simple, everyday language.

## Core Product Philosophy

**Three-Phase Quality Pattern**:
1. **Clean Input**: One-click templates, smart defaults, minimal user typing required
2. **Reliable Processing**: AI generation, validation, and analysis happen transparently in the middle layer
3. **Beautiful Output**: Users feel proud sharing results - professional styling, export-ready formats

This pattern applies to all features: scripts, contracts, templates, and reports.

## System Architecture

### Frontend

- **Framework**: React with TypeScript, Vite, Wouter for routing, TanStack Query for state management.
- **UI**: Shadcn/ui components (Radix UI base), Tailwind CSS, React Hook Form with Zod validation.
- **Design**: Split-panel workspace, mobile-first responsive design, custom typography (Inter, JetBrains Mono), custom color system, compact spacing, collapsible "Advanced Options," enhanced history dashboard.

### Backend

- **Framework**: Express.js (Node.js) with TypeScript (ESM modules).
- **API**: RESTful endpoints (`/api/scripts`) for generation, retrieval, and deletion.
- **Business Logic**: AI-powered script generation using OpenAI (GPT-5), template-based prompting, advanced character profile building (15+ attributes), Zod validation.
- **ElevenLabs Integration**: Comprehensive monitoring system (logging, metrics, rate limits), admin dashboard (`/elevenlabs-admin`) for overview, agent management, logs, and configuration, `ElevenLabsClient` wrapper for transparent logging.

### Data Storage

- **Database**: PostgreSQL (Neon serverless) using Drizzle ORM.
- **Schema**: `Scripts` table with metadata, `JSONB` for flexible character data, UUID primary keys, `createdAt` timestamps, script versioning, migration management.
- **Rationale**: Ensures data persistence, supports history, version control, and analytics.

### Knowledge Management System

- **Purpose**: Automated insight capture to prevent knowledge loss and accelerate development.
- **Components**:
    - **Watchdog Process**: Auto-triggers, captures high-quality insights, links to code, prevents duplicates.
    - **Post-it Notes**: Persistent, searchable knowledge base of insights, cross-referenced by code artifacts.
    - **Debug Patterns**: Multi-angle debugging framework, documented troubleshooting.
    - **Universal Taxonomy**: Standardized categorization (TECH, UX, ARCHITECTURE, FEATURES, PRODUCTION, BUSINESS) with subcategories and confidence levels.
- **Workflow**: Agent extracts insights, formats as structured post-its, links to code, maintains knowledge graph. Supports "Search-First Development."

### Script Generation Quality Philosophy

- **Core**: User-centered design from enterprise UX research for authentic, contextually-aware conversational AI scripts.
- **Multi-Expert Discovery Lens (6 Core Criteria)**: MVP Content, Nice-to-Have Elements, Interaction Flow, Character Context, User Anticipation, Wow Factor.
- **User Expectations**: Scripts are designed to meet and exceed expectations based on role (Support, Debate, Educational, Creative) by providing proactive problem solving, contextual awareness, emotional intelligence, and natural language.
- **Character Profile Depth**: Utilizes 15+ attributes (expertise, demographics, personality) to drive script authenticity, including subtle bias expression.
- **Prompt Engineering**: System prompts use methodology files, character psychology, user journey mapping, and scenario-specific guidance. Employs multi-pass generation for core dialogue, character voice, and ElevenLabs XML tag integration.
- **Anticipatory Design**: Focuses on problem prevention rather than just problem-solving.
- **Emotional Experience Mapping**: Scripts are designed to navigate user emotional states effectively.
- **Quality Metrics**: Authenticity, User Anticipation, and Technical Excellence scores.

### Contract Testing Lab (In Development)

- **Purpose**: Generate sample MSP and tech contracts with intentional deficiencies to test AI analysis capabilities systematically.
- **Architecture**:
    - **Database**: `contracts`, `contract_generation_batches`, `contract_analyses` tables with JSONB for flexible metadata
    - **Backend**: `contractGenerator.ts` service using OpenAI for generation with deficiency injection logic
    - **Bulk Generation**: Create 5 contracts simultaneously with different intentional flaws
    - **Multi-Lens Analysis**: Analyze from Legal, Financial, Technical, and Risk perspectives
    - **Professional Reporting**: Corporate-styled HTML/PDF exports with charts and executive summaries
- **Contract Types**: MSP Standard, SaaS Agreement, Support Contract, Consulting Agreement, Maintenance Contract
- **Deficiency Patterns**: Missing SLA, liability caps, termination clauses, data protection, IP ownership, payment terms, scope definitions
- **Testing Workflow**: Bulk generate → Multi-lens analyze → Compare results → Professional report
- **UX Pattern**: One-click templates (quick start) + Advanced options (granular control) following established ScriptMaster pattern
- **Value Proposition**: Systematic QA automation, benchmark creation with ground truth, training data generation for ML improvement

### Strategic Evolution Roadmap

- **Current State (Layer 2 - Automation)**: Visibility + automation complete. Users have script history, AI generation, templates, current events search, ElevenLabs admin dashboard with VIEW/TEST capabilities.
- **Next Evolution (Layer 3 - Intelligence)**: Self-improving system that learns from every script, predicts user needs, recommends optimizations. Key features:
    - **Expertise Amplification**: Beginners produce expert-level scripts automatically (10 hours → 30 seconds, 90% cost reduction)
    - **Network Effects Compounding**: Every script generated makes AI smarter (1,000 scripts → pattern learning → better quality)
    - **Evidence-Based Explanations**: AI shows WHY it made choices, builds trust, enables learning
    - **Predictive Recommendations**: "Based on your support scripts, you might need onboarding training scripts"
    - **Pattern Learning**: "Your CFO characters perform best with compliance language (+12% quality)"
    - **Contract Analysis Learning**: Deficiency detection results create proprietary training data corpus
- **Future Opportunities**:
    - **Waiting Stakeholders**: Show who's blocked waiting for scripts, urgency scoring, social visibility
    - **Context Intelligence API**: ScriptMaster as hub other apps query for conversational AI intelligence
    - **Character Template Library**: Pre-built expert archetypes (CPO, PM, CFO, IT Director) with cognitive frameworks
    - **Multi-Lens Analyzer as Service**: Generalized analysis framework for any text content (scripts, contracts, templates)
    - **Professional Report Generator**: Reusable system for corporate-styled exports across all features
- **Competitive Moat**: Proprietary training data corpus (character patterns, quality signals, industry terminology, deficiency detection patterns) competitors can't replicate without equivalent data.
- **Reference**: See `STRATEGIC_INSIGHTS.md` and `RECENT_INSIGHTS_2025-11.md` for detailed analysis and implementation roadmap.

## External Dependencies

- **AI Integration**: OpenAI API via Replit's AI Integrations service (GPT model), custom methodology file for prompt engineering.
- **UI Components**: Radix UI, cmdk, embla-carousel-react, lucide-react, date-fns.
- **Form & Validation**: React Hook Form, Zod, @hookform/resolvers.
- **Styling**: Tailwind CSS, class-variance-authority, clsx, tailwind-merge.
- **Build Tools**: Vite plugins (Replit integration), ESBuild, PostCSS with Autoprefixer.
- **Session Management**: Express session, connect-pg-simple for PostgreSQL session store.